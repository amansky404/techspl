<%- include('header') %>

<div class="page-header">
    <h1><i class="fas fa-question-circle"></i> FAQs Management</h1>
    <button class="btn btn-primary" onclick="showAddForm()">
        <i class="fas fa-plus"></i> Add New FAQ
    </button>
</div>

<div id="addForm" class="form-card" style="display: none;">
    <h2><span id="formTitle">Add New FAQ</span></h2>
    <form id="faqForm" action="/admin/faqs/add" method="POST">
        <div class="form-group">
            <label>Question *</label>
            <input type="text" id="question" name="question" required>
        </div>
        <div class="form-group">
            <label>Answer *</label>
            <textarea id="answer" name="answer" rows="6" required></textarea>
        </div>
        <div class="form-group">
            <label>Category</label>
            <input type="text" id="category" name="category" placeholder="Company, Services, Technical, etc.">
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> <span id="submitBtn">Save</span></button>
            <button type="button" class="btn btn-secondary" onclick="hideAddForm()"><i class="fas fa-times"></i> Cancel</button>
        </div>
    </form>
</div>

<div class="data-table">
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Question</th>
                <th>Category</th>
                <th>Answer Preview</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% faqs.forEach((faq, index) => { %>
                <tr>
                    <td><%= index + 1 %></td>
                    <td><strong><%= faq.question %></strong></td>
                    <td>
                        <% if (faq.category) { %>
                            <span class="badge badge-info"><%= faq.category %></span>
                        <% } else { %>
                            <span class="badge badge-secondary">General</span>
                        <% } %>
                    </td>
                    <td class="small-text"><%= faq.answer.substring(0, 100) %>...</td>
                    <td>
                        <button class="btn-icon btn-warning" onclick='editFAQ(<%= index %>, <%- JSON.stringify(faq) %>)' title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon btn-danger" onclick="deleteItem('faqs', <%= index %>)" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</div>

<%- include('footer') %>
