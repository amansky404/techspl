<%- include('header') %>

<div class="page-header">
    <h1><i class="fas fa-cogs"></i> Services Management</h1>
    <button class="btn btn-primary" onclick="showAddForm()">
        <i class="fas fa-plus"></i> Add New Service
    </button>
</div>

<!-- Add Service Form -->
<div id="addForm" class="form-card" style="display: none;">
    <h2><i class="fas fa-plus-circle"></i> <span id="formTitle">Add New Service</span></h2>
    <form id="serviceForm" action="/admin/services/add" method="POST">
        <div class="form-group">
            <label>Service Name *</label>
            <input type="text" id="name" name="name" required>
        </div>
        
        <div class="form-group">
            <label>Description *</label>
            <textarea id="description" name="description" rows="3" required></textarea>
        </div>
        
        <div class="form-group">
            <label>Image URL *</label>
            <input type="text" id="image" name="image" placeholder="https://example.com/image.jpg" required>
            <small>Enter the full URL of the service image</small>
        </div>
        
        <div class="form-group">
            <label>Pricing</label>
            <input type="text" id="pricing" name="pricing" placeholder="e.g., Starting from â‚¹2,50,000/year">
        </div>
        
        <div class="form-group">
            <label>Features (comma-separated)</label>
            <textarea id="features" name="features" rows="3" placeholder="Feature 1, Feature 2, Feature 3"></textarea>
        </div>
        
        <div class="form-group">
            <label>Benefits (comma-separated)</label>
            <textarea id="benefits" name="benefits" rows="2" placeholder="Benefit 1, Benefit 2"></textarea>
        </div>
        
        <div class="form-group">
            <label>Delivery Time</label>
            <input type="text" id="deliveryTime" name="deliveryTime" placeholder="e.g., 2-4 weeks">
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-success">
                <i class="fas fa-save"></i> <span id="submitBtn">Save Service</span>
            </button>
            <button type="button" class="btn btn-secondary" onclick="hideAddForm()">
                <i class="fas fa-times"></i> Cancel
            </button>
        </div>
    </form>
</div>

<!-- Services List -->
<div class="data-table">
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Image</th>
                <th>Name</th>
                <th>Features Count</th>
                <th>Pricing</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% services.forEach((service, index) => { %>
                <tr>
                    <td><%= index + 1 %></td>
                    <td class="image-cell">
                        <% if (service.image) { %>
                            <img src="<%= service.image %>" alt="<%= service.name %>" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">
                        <% } else { %>
                            <span class="text-muted">No image</span>
                        <% } %>
                    </td>
                    <td>
                        <strong><%= service.name %></strong>
                        <p class="small-text"><%= service.description.substring(0, 80) %>...</p>
                    </td>
                    <td><span class="badge badge-secondary"><%= service.features ? service.features.length : 0 %> features</span></td>
                    <td class="small-text"><%= service.pricing || 'Contact' %></td>
                    <td>
                        <button class="btn-icon btn-warning" 
                                data-index="<%= index %>" 
                                data-service='<%- JSON.stringify(service) %>'
                                onclick="editService(this.dataset.index, JSON.parse(this.dataset.service))" 
                                title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon btn-danger" 
                                data-type="services" 
                                data-index="<%= index %>"
                                onclick="deleteItem(this.dataset.type, this.dataset.index)" 
                                title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</div>

<%- include('footer') %>
