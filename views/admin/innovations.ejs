<%- include('header') %>

<div class="page-header">
    <h1><i class="fas fa-flask"></i> Innovations Management</h1>
    <button class="btn btn-primary" onclick="showAddForm()">
        <i class="fas fa-plus"></i> Add New Innovation
    </button>
</div>

<div id="addForm" class="form-card" style="display: none;">
    <h2><span id="formTitle">Add New Innovation</span></h2>
    <form id="innovationForm" action="/admin/innovations/add" method="POST">
        <div class="form-group">
            <label>Innovation Name *</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label>Description *</label>
            <textarea id="description" name="description" rows="4" required></textarea>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Status *</label>
                <input type="text" id="status" name="status" placeholder="Active Research" required>
            </div>
            <div class="form-group">
                <label>Stage</label>
                <input type="text" id="stage" name="stage" placeholder="Phase 3 - Beta Testing">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Team</label>
                <input type="text" id="team" name="team" placeholder="12 researchers">
            </div>
            <div class="form-group">
                <label>Funding</label>
                <input type="text" id="funding" name="funding" placeholder="â‚¹5 Crores">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Timeline</label>
                <input type="text" id="timeline" name="timeline" placeholder="Commercial launch Q2 2026">
            </div>
            <div class="form-group">
                <label>Image URL</label>
                <input type="text" id="image" name="image" placeholder="https://...">
            </div>
        </div>
        <div class="form-group">
            <label>Technologies (comma-separated)</label>
            <input type="text" id="technologies" name="technologies" placeholder="AI, ML, IoT">
        </div>
        <div class="form-group">
            <label>Achievements (comma-separated)</label>
            <textarea id="achievements" name="achievements" rows="3"></textarea>
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> <span id="submitBtn">Save</span></button>
            <button type="button" class="btn btn-secondary" onclick="hideAddForm()"><i class="fas fa-times"></i> Cancel</button>
        </div>
    </form>
</div>

<div class="data-table">
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Status</th>
                <th>Stage</th>
                <th>Funding</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% innovations.forEach((innovation, index) => { %>
                <tr>
                    <td><%= index + 1 %></td>
                    <td>
                        <strong><%= innovation.name %></strong>
                        <p class="small-text"><%= innovation.description.substring(0, 80) %>...</p>
                    </td>
                    <td><span class="badge badge-success"><%= innovation.status %></span></td>
                    <td class="small-text"><%= innovation.stage || 'N/A' %></td>
                    <td><%= innovation.funding || 'N/A' %></td>
                    <td>
                        <button class="btn-icon btn-warning" onclick='editInnovation(<%= index %>, <%- JSON.stringify(innovation) %>)' title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon btn-danger" onclick="deleteItem('innovations', <%= index %>)" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</div>

<%- include('footer') %>
